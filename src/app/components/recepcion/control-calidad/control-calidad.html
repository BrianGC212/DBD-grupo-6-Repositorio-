<div class="main-layout">
  <div class="control-container">
    <h2 class="titulo">Control Calidad</h2>

    <div *ngIf="cargando" class="mensaje-vacio">
      Cargando recepciones...
    </div>

    <div *ngIf="!cargando && recepciones.length === 0" class="mensaje-vacio">
      No hay recepciones aprobadas disponibles.
    </div>

    <div *ngIf="!cargando && recepciones.length > 0" class="tabla-contenedor">
      <table class="tabla">
        <thead>
          <tr>
            <th>Código</th>
            <th>Producto</th>
            <th>Descripción del Lote</th>
            <th>Cantidad</th>
            <th>Unidad</th>
            <th>Estado</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let r of recepciones">
            <td>{{ r.cod_recepcion }}</td>
            <td>{{ r.nombre_producto }}</td>
            <td>{{ r.descripcion_lote }}</td>
            <td>{{ r.cantidad }}</td>
            <td>{{ r.unidad }}</td>
            <td><span class="estado-aprobado">{{ r.estado_recepcion }}</span></td>
            <td>
              <button (click)="abrirFormulario(r.cod_recepcion, 'aprobar')">Aprobar</button>
              <button (click)="abrirFormulario(r.cod_recepcion, 'observar')">Observar</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Formulario modal centrado -->
    <div *ngIf="formularioVisible" class="modal-fondo">
      <div class="modal">
        <h3>{{ modo === 'aprobar' ? 'Aprobar Recepción' : 'Observar Recepción' }}</h3>

        <label>ID del Empleado:</label>
        <input type="number" [(ngModel)]="idEmpleado" />

        <label>Temperatura del Producto:</label>
        <input type="number" [(ngModel)]="temperatura" />

        <div *ngIf="modo === 'observar'">
          <label>Observaciones del Lote:</label>
          <textarea [(ngModel)]="observacionesLote"></textarea>

          <label>Observaciones del Empaque:</label>
          <textarea [(ngModel)]="observacionesEmpaque"></textarea>
        </div>

        <div class="botones-formulario">
          <button (click)="enviarFormulario()">Enviar</button>
          <button (click)="cerrarFormulario()">Cancelar</button>
        </div>
      </div>
    </div>
  </div>
</div>

